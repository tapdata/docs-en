# Manage Agent


TapData Cloud provides visual management and maintenance capabilities for Agents. You can manage installed Agents through the dedicated page or by executing commands.


```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
```

## Manage Agent by Web

1. Log in to TapData Platform.

2. Click **Resource Management** in the left navigation panel, and then choose which operation to perform.

![](../images/agent_list.png)

```mdx-code-block
<Tabs className="unique-tabs">
<TabItem value="① Create Agent">
```
   Agent support multi-platform installation, see Install Agent.

</TabItem>

<TabItem value="② Stop Agent">
Click **Stop** to pause the Agent, which can be used for temporary maintenance scenarios, to restart the Agent later, you should run it from the command line.

</TabItem>

<TabItem value="③ Restart Agent">
Click **Restart** to restart the Agent.

</TabItem>

<TabItem value="④ Unsubscribe Agent">
Click **Unsubscribe** to delete the Agent. Please note that once deleted, the Agent cannot be recovered.

</TabItem>

<TabItem value="⑤ Upgrade Agent">
When a new version becomes available, an upgrade icon will appear on the right side of the version information. To initiate the upgrade process, follow these steps:

- **Automatic Upgrade**
  1. Choose this method if the Agent status is running.
  2. Click the upgrade icon, and the upgrade process will begin.
  3. After the upgrade is completed, the upgrade icon will disappear automatically.
  4. In case the automatic upgrade fails, you can proceed with a manual upgrade.
   
- **Manual Upgrade**
  1. To ensure that the upgrade operation does not impact any ongoing tasks, it is advisable to stop any task associated with the Agent before proceeding with the upgrade.  
  2. Execute the upgrade command on the device where the Agent is installed.
  3. After the upgrade is completed, restart the Agent.
    
By following these instructions, you can easily upgrade to the latest version of the Agent software. If you encounter any issues during the upgrade process, please refer to the documentation or contact our support team for assistance.

</TabItem>
</Tabs>




## Manage Agent by Command

According to the platform selection of the Agent installation, view the relevant command description:


```mdx-code-block
<Tabs className="unique-tabs">
<TabItem value="Linux">
```

Navigate to the installation directory of the Agent and proceed by executing the following command: 

- View command help: `/tapdata help`
- Check the status of the Agent: `/tapdata status`
- Start Agent: `/tapdata start`
- Stop Agent: `/tapdata stop`

</TabItem>

<TabItem value="Windows">

Enter the installation directory of the Agent and proceed with the chosen operation:

1. Check the status of the Agent: Double-click the **status.bat** file.
2. Start Agent: Double-click the **start.bat** file or run the **tapdata.exe** file.
3. Stop Agent: Double-click the **stop.bat** file.

</TabItem>

<TabItem value="Docker/Mac(M1 Chip)">

1. Execute `docker ps` to get the container ID.
2. To access the container command line, execute the following command format:
    ```bash
    docker exec -it container ID/bin/bash
    ```
    Replace the container ID in the command, such as `docker exec -it 1dbee41b4adc/bin/bash`.
3. Within the container command line, navigate to the installation directory of the Agent and proceed by executing the following command:
  - View command help: `./tapdata help`
  - Check the status of the Agent: `./tapdata status`
  - Start Agent: `./tapdata start`
  - Stop Agent: `./tapdata stop`

</TabItem>

</Tabs>

### Agent Directory Description
During the installation and execution of the task, the Agent will automatically generate some files in the installation directory for storing task information, logs, configuration files, data source certificates and other information, as detailed below:

tap_table_ehcache: Cache the table's structure of the data source associated with the task runtime.

```bash
├── cert/						 			# Certificate files for the middleware database
├── application.yml							# Agent configuration file
├── CacheObserveLogs/						# Cached monitoring logs
├── components/								# Jar files for engine execution
├── connectors/								# Files related to data source plugins
├── etc/									# Initialization scripts for the middleware database
├── fileObserveLogAppenderV2/				# Observability logs, subdirectories named as task IDs
├── logs/									# Logs generated by the engine during runtime
├── tapdata/								# Agent program
├── tapdataDir/								# Recording the working directory of the engine
└── tap_table_ehcache/						# Cached table models of data sources

```



:::tip
To ensure the smooth operation of the Agent and enable efficient fault detection, please refrain from deleting the mentioned directory or file.
:::



### Adjust Agent Runtime Memory

To adjust the memory configuration in the Agent installation directory, locate the **application.yml** configuration file and edit it accordingly. Set the tapdataJavaOpts: `-Xms4G -Xmx8G` to allocate 4GB as the initial memory and allow a maximum of 8GB.

```yaml
tapdata:
    conf:
        tapdataPort: '3030'
        backendUrl: 'https://cloud.tapdata.io/api/'
        apiServerPort: ""
        tapdataJavaOpts: "-Xms4G -Xmx8G"
        reportInterval: 20000
        uuid: a5f266a1-a495-412f-a433-29d345713c176
		……
```

After saving the changes, restart the Agent to take effect:

```bash
# Stop Agent
./tapdata stop -f
# Start Agent
./tapdata start
```
